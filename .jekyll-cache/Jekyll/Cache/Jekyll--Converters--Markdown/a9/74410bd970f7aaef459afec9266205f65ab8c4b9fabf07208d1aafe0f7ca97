I"&<h2 id="what-we-are-about-to-learn">What we are about to learn</h2>
<p>In This blog we will Discuss Various ways to Test Platform Events</p>

<h2 id="overview">Overview</h2>
<p>Platform Events are cool, fast, easy and optimized way to build an Integration between two sources with a real time sync. Platform events are easy to setup and publish as we discussed in our previous <a href="/Salesforce-spices/Setup-SF-PE-intro/">blog</a>.</p>

<p>Testing out Platform events can be frustrated specially when events are used for Integration and you don’t have access to the Other system. So to find out what information events are actually publishing can be a headache for QA and Devs. But don’t worry I have gathered some of the best ways to test Platform Events. So lets start.</p>

<h2 id="the-easiest-and-cleanest-way">The Easiest and Cleanest way</h2>

<p>I have created a tool recently that can subscribe to the Platform Events along with Push Topics and can show the real time information when you events are published. The tool name is Platform Event Tester ( I love being straight forward ;) ) its easy to use and open source. The tool utilizes Oauth2.0 to Authorize the Org so its secure and no risk involved.</p>

<p>You can find the tool <a href="https://pe-tester.herokuapp.com/">here</a>.</p>

<p>A video tutorial is below:</p>

<p><img src="/Salesforce-spices/assets/img/pe-tester-tutorial.gif" alt="Video tutorial PE-Tester" /></p>

<p>If you like this tool then you can support me on the repo <a href="https://github.com/AyuSharma-dev/PE-Tester">!here</a>.</p>

<h2 id="test-platform-events-using-apex-trigger">Test Platform Events using Apex Trigger</h2>

<p>Platform Events support After Trigger creation. So whenever the Platform Event published this Trigger will run and you can add System debugs here to debug the subscribed events detail that is passed on from another system.</p>

<p>You can use the below code as an example for Trigger.</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="sr">//</span> <span class="no">Trigger</span> <span class="k">for</span> <span class="n">catching</span> <span class="no">Low_Ink</span> <span class="n">events</span><span class="p">.</span>
<span class="nf">trigger</span> <span class="no">TriggerName</span> <span class="n">on</span> <span class="no">APINameOfPlatformEvent</span> <span class="p">(</span><span class="n">after</span> <span class="n">insert</span><span class="p">)</span> <span class="p">{</span>    
    
    <span class="k">for</span> <span class="p">(</span><span class="no">EventName</span> <span class="n">event</span> <span class="p">:</span> <span class="no">Trigger</span><span class="o">.</span><span class="no">New</span><span class="p">)</span> <span class="p">{</span>
        <span class="no">System</span><span class="p">.</span><span class="nf">debug</span><span class="p">(</span><span class="s1">'Event Details: '</span><span class="o">+</span><span class="n">event</span><span class="p">);</span>
    <span class="p">}</span>

<span class="p">}</span>
</code></pre></div></div>
<blockquote>
  <p>This case of testing Platform Events is not suggested because you have to create a Trigger just for the testing and it cannot be done on the Production env.</p>
</blockquote>

<p><br /></p>
<h2 id="debug-platform-events-when-publishing">Debug Platform Events when Publishing</h2>

<p>Another way to test Platform events is by Debugging the details at the moment when you publish the Events. You can update your Event publishing code from the below code</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="no">Database</span><span class="o">.</span><span class="no">SaveResult</span> <span class="n">result</span> <span class="o">=</span> <span class="no">EventBus</span><span class="p">.</span><span class="nf">publish</span><span class="p">(</span> <span class="n">new</span> <span class="n">eventApiName</span><span class="p">(</span> <span class="no">Message__c</span><span class="o">=</span><span class="s1">'Test Message'</span> <span class="p">)</span> <span class="p">);</span>
<span class="k">if</span> <span class="p">(</span><span class="n">result</span><span class="p">.</span><span class="nf">isSuccess</span><span class="p">())</span> <span class="p">{</span>
    <span class="no">System</span><span class="p">.</span><span class="nf">debug</span><span class="p">(</span><span class="s1">'Successfully published event.'</span><span class="p">);</span>
    <span class="no">System</span><span class="p">.</span><span class="nf">debug</span><span class="p">(</span><span class="n">result</span><span class="p">)</span> <span class="o">/</span><span class="n">this</span> <span class="n">will</span> <span class="nb">print</span> <span class="n">the</span> <span class="n">published</span> <span class="n">information</span><span class="o">.</span>
<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
    <span class="k">if</span><span class="p">(</span> <span class="n">result</span><span class="p">.</span><span class="nf">getErrors</span><span class="p">().</span><span class="nf">size</span><span class="p">()</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="p">){</span>
        <span class="no">System</span><span class="p">.</span><span class="nf">debug</span><span class="p">(</span><span class="s1">'Error::'</span><span class="o">+</span><span class="n">result</span><span class="p">.</span><span class="nf">getErrors</span><span class="p">());</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<p><br /><br />
So these are the various way we can use to Test out the Platform events. Checkout this [blog] to find to see how you can test the Events in Test class.</p>

<p>Thanks for Reading !!</p>
:ET